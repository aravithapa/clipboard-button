<link rel="import" href="../polymer/polymer.html"> <link rel="import" href="../iron-icon/iron-icon.html" async> <link rel="import" href="../iron-icons/iron-icons.html" async> <dom-module id="clipboard-button"> <template> <style>*,::after,::before,:host{box-sizing:border-box;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased}:host{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer}.icon{--iron-icon-width:1em;--iron-icon-height:1em;color:inherit}</style> <iron-icon class="icon" icon="[[icon]]"></iron-icon> </template> <script>!function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=(function(){function t(t){this.value=t}function e(e){function n(t,e){return new Promise(function(n,r){var c={key:t,arg:e,resolve:n,reject:r,next:null};u?u=u.next=c:(i=u=c,o(t,e))})}function o(n,i){try{var u=e[n](i),c=u.value;c instanceof t?Promise.resolve(c.value).then(function(t){o("next",t)},function(t){o("throw",t)}):r(u.done?"return":"normal",u.value)}catch(a){r("throw",a)}}function r(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1})}i=i.next,i?o(i.key,i.arg):u=null}var i,u;this._invoke=n,"function"!=typeof e["return"]&&(this["return"]=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype["throw"]=function(t){return this._invoke("throw",t)},e.prototype["return"]=function(t){return this._invoke("return",t)},{wrap:function(t){return function(){return new e(t.apply(this,arguments))}},await:function(e){return new t(e)}}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),n=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),o=function(e){e.exports;return function(n,o){"undefined"!=typeof e?e.exports=o():"function"==typeof define&&"object"===t(define.amd)?define(o):this[n]=o()}("clipboard",function(){if(!document.addEventListener)return null;var n={};return n.copy=function(){function t(){n=!1,o=null,r&&window.getSelection().removeAllRanges(),r=!1}function e(){var t=document.getSelection();if(!document.queryCommandEnabled("copy")&&t.isCollapsed){var e=document.createRange();e.selectNodeContents(document.body),t.addRange(e),r=!0}}var n=!1,o=null,r=!1;return document.addEventListener("copy",function(t){if(n){for(var e in o)t.clipboardData.setData(e,o[e]);t.preventDefault()}}),function(r){return new Promise(function(i,u){n=!0,o="string"==typeof r?{"text/plain":r}:r instanceof Node?{"text/html":(new XMLSerializer).serializeToString(r)}:r;try{if(e(),!document.execCommand("copy"))throw new Error("Unable to copy. Perhaps it's not available in your browser?");t(),i()}catch(c){t(),u(c)}})}}(),n.paste=function(){var t,e,n=!1;return document.addEventListener("paste",function(o){if(n){n=!1,o.preventDefault();var r=t;t=null,r(o.clipboardData.getData(e))}}),function(o){return new Promise(function(r,i){n=!0,t=r,e=o||"text/plain";try{document.execCommand("paste")||(n=!1,i(new Error("Unable to paste. Pasting only works in Internet Explorer at the moment.")))}catch(u){n=!1,i(new Error(u))}})}}(),"undefined"==typeof ClipboardEvent&&"undefined"!=typeof window.clipboardData&&"undefined"!=typeof window.clipboardData.setData&&(!function(n){function o(t,e){return function(){t.apply(e,arguments)}}function r(e){if("object"!=t(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,o(u,this),o(c,this))}function i(t){var e=this;return null===this._state?void this._deferreds.push(t):void s(function(){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return void(e._state?t.resolve:t.reject)(e._value);var o;try{o=n(e._value)}catch(r){return void t.reject(r)}t.resolve(o)})}function u(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==("undefined"==typeof e?"undefined":t(e))||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void l(o(n,e),o(u,this),o(c,this))}this._state=!0,this._value=e,a.call(this)}catch(r){c.call(this,r)}}function c(t){this._state=!1,this._value=t,a.call(this)}function a(){for(var t=0,e=this._deferreds.length;e>t;t++)i.call(this,this._deferreds[t]);this._deferreds=null}function f(t,e,n,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=o}function l(t,e,n){var o=!1;try{t(function(t){o||(o=!0,e(t))},function(t){o||(o=!0,n(t))})}catch(r){if(o)return;o=!0,n(r)}}var s=r.immediateFn||"function"==typeof setImmediate&&setImmediate||function(t){setTimeout(t,1)},p=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};r.prototype["catch"]=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var n=this;return new r(function(o,r){i.call(n,new f(t,e,o,r))})},r.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&p(arguments[0])?arguments[0]:arguments);return new r(function(n,o){function r(u,c){try{if(c&&("object"==("undefined"==typeof c?"undefined":t(c))||"function"==typeof c)){var a=c.then;if("function"==typeof a)return void a.call(c,function(t){r(u,t)},o)}e[u]=c,0===--i&&n(e)}catch(f){o(f)}}if(0===e.length)return n([]);for(var i=e.length,u=0;u<e.length;u++)r(u,e[u])})},r.resolve=function(e){return e&&"object"==("undefined"==typeof e?"undefined":t(e))&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(t){return new r(function(e,n){n(t)})},r.race=function(t){return new r(function(e,n){for(var o=0,r=t.length;r>o;o++)t[o].then(e,n)})},"undefined"!=typeof e&&e.exports?e.exports=r:n.Promise||(n.Promise=r)}(this),n.copy=function(t){return new Promise(function(e,n){if("string"!=typeof t&&!("text/plain"in t))throw new Error("You must provide a text/plain type.");var o="string"==typeof t?t:t["text/plain"],r=window.clipboardData.setData("Text",o);r?e():n(new Error("Copying was rejected."))})},n.paste=function(){return new Promise(function(t,e){var n=window.clipboardData.getData("Text");n?t(n):e(new Error("Pasting was rejected."))})}),n}),e.exports}({exports:{}}),r=function(){function t(){e(this,t)}return n(t,[{key:"beforeRegister",value:function(){this.is="clipboard-button",this.properties={content:String,element:Object,icon:{type:String,value:"icons:content-copy"}},this.listeners={tap:"copy"}}},{key:"copy",value:function(){var t=this,e=this.content,n=this.element,r=void 0;e?r={"text/html":e}:n&&(r=n),r||console.warn("No content or element to copy specified"),o.copy(r).then(function(){return t.fire("copied")},function(t){return console.error(t)})}}]),t}();Polymer(r)}()</script> </dom-module>